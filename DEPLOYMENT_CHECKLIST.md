# ğŸš€ éƒ¨ç½²æ£€æŸ¥æ¸…å•

åœ¨éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®Œæˆä»¥ä¸‹æ£€æŸ¥é¡¹ç›®ï¼š

## âœ… æœ¬åœ°æ„å»ºæ£€æŸ¥

- [ ] **æ„å»ºæˆåŠŸ**: `pnpm build` æ— é”™è¯¯
- [ ] **Lint æ£€æŸ¥**: `pnpm lint` æ— è­¦å‘Š
- [ ] **ç±»å‹æ£€æŸ¥**: TypeScript ç¼–è¯‘æ— é”™è¯¯
- [ ] **ç¯å¢ƒå˜é‡**: `.env.production` æ–‡ä»¶å·²é…ç½®

## ğŸ”§ é…ç½®æ–‡ä»¶æ£€æŸ¥

- [ ] **Dockerfile**: å·²åˆ›å»ºå¹¶é…ç½®æ­£ç¡®
- [ ] **docker-compose.yml**: æœåŠ¡é…ç½®æ­£ç¡®
- [ ] **nginx.conf**: åå‘ä»£ç†é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] **deploy.sh**: éƒ¨ç½²è„šæœ¬æœ‰æ‰§è¡Œæƒé™

## ğŸŒ æœåŠ¡å™¨å‡†å¤‡

- [ ] **æœåŠ¡å™¨è®¿é—®**: SSH è¿æ¥æ­£å¸¸
- [ ] **Docker å®‰è£…**: Docker å’Œ Docker Compose å·²å®‰è£…
- [ ] **ç«¯å£å¼€æ”¾**: 80ã€443ã€22 ç«¯å£å·²å¼€æ”¾
- [ ] **åŸŸåè§£æ**: A è®°å½•æŒ‡å‘æœåŠ¡å™¨ IPï¼ˆå¦‚æœ‰åŸŸåï¼‰

## ğŸ” å®‰å…¨é…ç½®

- [ ] **ç¯å¢ƒå˜é‡**: ç”Ÿäº§ç¯å¢ƒå¯†é’¥å·²é…ç½®
- [ ] **é˜²ç«å¢™**: åªå¼€æ”¾å¿…è¦ç«¯å£
- [ ] **SSL è¯ä¹¦**: HTTPS é…ç½®ï¼ˆæ¨èï¼‰
- [ ] **ç”¨æˆ·æƒé™**: é root ç”¨æˆ·è¿è¡Œ

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### 1. ä¸Šä¼ ä»£ç 
```bash
# æ–¹æ³•ä¸€ï¼šGit
git clone https://github.com/your-repo/train-ticket-assistant.git

# æ–¹æ³•äºŒï¼šSCP
scp -r ./train-ticket-assistant user@server:/home/user/
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
```bash
cd train-ticket-assistant
nano .env.production

# å¿…å¡«é¡¹ç›®
DIFY_API_KEY=your_api_key
DIFY_APP_ID=91527c76-446a-4da1-9bfb-294f889be22d
NODE_ENV=production
```

### 3. æ‰§è¡Œéƒ¨ç½²
```bash
chmod +x deploy.sh
./deploy.sh
```

### 4. éªŒè¯éƒ¨ç½²
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose ps

# æµ‹è¯• API
curl http://localhost:3000/api/status

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

## ğŸ” éƒ¨ç½²åæ£€æŸ¥

- [ ] **æœåŠ¡è¿è¡Œ**: å®¹å™¨çŠ¶æ€ä¸º `Up`
- [ ] **API å“åº”**: `/api/status` è¿”å›æ­£å¸¸
- [ ] **é¡µé¢è®¿é—®**: é¦–é¡µå¯ä»¥æ­£å¸¸åŠ è½½
- [ ] **èŠå¤©åŠŸèƒ½**: å¯ä»¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯
- [ ] **Markdown æ¸²æŸ“**: AI å›å¤æ ¼å¼æ­£ç¡®

## ğŸš¨ å¸¸è§é—®é¢˜

### æ„å»ºå¤±è´¥
```bash
# æ¸…ç†ç¼“å­˜
pnpm clean
rm -rf .next node_modules
pnpm install
pnpm build
```

### ç«¯å£å†²çª
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo lsof -i :3000
sudo kill -9 <PID>
```

### æƒé™é—®é¢˜
```bash
# ä¿®å¤æ–‡ä»¶æƒé™
sudo chown -R $USER:$USER ./train-ticket-assistant
chmod +x deploy.sh
```

### Docker é—®é¢˜
```bash
# é‡å¯ Docker æœåŠ¡
sudo systemctl restart docker

# æ¸…ç† Docker ç¼“å­˜
docker system prune -a
```

## ğŸ“Š ç›‘æ§è®¾ç½®

### æ—¥å¿—ç›‘æ§
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f train-ticket-assistant
```

### æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats

# ç³»ç»Ÿèµ„æº
htop
df -h
```

## ğŸ”„ æ›´æ–°æµç¨‹

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull

# 2. é‡æ–°éƒ¨ç½²
./deploy.sh

# 3. éªŒè¯æ›´æ–°
curl http://localhost:3000/api/status
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **æ—¥å¿—æ–‡ä»¶**: `docker-compose logs`
2. **ç³»ç»Ÿèµ„æº**: å†…å­˜ã€ç£ç›˜ç©ºé—´
3. **ç½‘ç»œè¿æ¥**: é˜²ç«å¢™ã€ç«¯å£é…ç½®
4. **ç¯å¢ƒå˜é‡**: é…ç½®æ˜¯å¦æ­£ç¡®

---

**éƒ¨ç½²æˆåŠŸæ ‡å¿—**: 
- âœ… é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®
- âœ… èŠå¤©åŠŸèƒ½æ­£å¸¸å·¥ä½œ  
- âœ… AI å›å¤æ ¼å¼ç¾è§‚
- âœ… ç§»åŠ¨ç«¯é€‚é…è‰¯å¥½

ğŸ‰ **æ­å–œï¼ä½ çš„ç«è½¦ç¥¨åŠ©æ‰‹å·²æˆåŠŸéƒ¨ç½²ï¼**
